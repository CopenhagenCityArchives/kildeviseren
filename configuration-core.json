{
   "collection":{
      "id":"1",
      "name":"Politiets registerblade",
      "description":"Indeholder alle borger i København for periode 1892-1923",
      "metadataStructure": {
          "type": "hierarchy",
          "levels": [
              "station",
              "filmrulle"
            ]
        },
        "alternativeMetadataStructure":{
            "type":"hierarchy",
            "levels":[
                {
                    "order":1,
                    "name":"Station",
                    "api_name":"station",
                    "description":"Den pågældende station",
                    "help_url":"www.kbharkiv.dk/registerblade/stationer"
                },
                {
                    "order":2,
                    "name":"Filmrulle",
                    "api_name":"roll",
                    "description":"Den pågældende filmrulle. Der er cirka 40 pr. station, og hver filmrulle indeholder cirka 1200 registerblade.",
                    "help_url":"www.kbharkiv.dk/registerblade/filmruller"
                }               
            ]
        },
      "metadataTables":[
        {
            "name":"stationer",
            "description":"Politistationer i København. Der findes 6 i alt",
            "tableName":"prb_stationer",
            "imageField":false,
            "fields":[
               {
                  "name":"nummer",
                  "tableFieldName":"nummer",
                  "order":1
               },
               {
                  "name":"navn",
                  "tableFieldName":"navn",
                  "order":2
               }
            ],
            "relations":[

            ]
         },
         {
            "name":"filmrulle",
            "tableName":"prb_filmrulle",
            "description":"Hver station har en række filmruller tilknyttet",
            "imageField":false,
            "fields":[
               {
                  "name":"nummer",
                  "tableFieldName":"nummer",
                  "order":1
               },
               {
                  "name":"navn",
                  "tableFieldName":"navn",
                  "order":2
               }
            ],
            "relations":[
               {
                  "foreignTableName":"station",
                  "foreignKey":"station_id",
                  "primaryKey":"id"
               }
            ]
         },
         {
            "name":"registerblad",
            "tableName":"prb_registerblad",
            "description":"Hver filmrulle består af registerblade",
            "imageField":"id",
            "fields":[
               {
                  "name":"id",
                  "tableFieldName":"registerblad_id",
                  "order":1,
                  "image_relation":true
               }
            ],
            "relations":[
               {
                  "primaryTableName":"filmrulle",
                  "foreignKey":"filmrulle_id",
                  "primaryKey":"id"
               },
               {
                  "primaryTableName":"station",
                  "foreignKey":"station_id",
                  "primaryKey":"id"
               }
            ]
         }
      ],
      "indexationTables":[
         {
            "name":"personer",
            "description":"Indeholder personer på registerbladet, både hovedpersoner, ægtefæller og børn",
            "tableName":"prb_personer",
            "maxNumberOfIndexations":"-1",
            "fields":[
               {
                  "type":"form",
                  "name":"Fornavn",
                  "description":"Personens fornavne",
                  "tableFieldName":"fornavne",
                  "order":2,
                  "fieldLength":"50",
                  "caption":"Indtast fornavne",
                  "normalizedData":[

                  ],
                  "validationRules":[
                     {
                        "errorMessage":"Feltet skal udfyldes",
                        "validationRule":"notEmpty"
                     },
                     {
                        "errorMessage":"Max 100 tegn",
                        "validationRule":"^[\\s\\S]{0,100}$"
                     }
                  ]
               },
               {
                  "type":"form",
                  "name":"Efternavn",
                  "description":"Personens efternavn",
                  "tableFieldName":"navn",
                  "order":3,
                  "fieldLength":"50",
                  "caption":"Indtast efternavn",
                  "normalizedData":[

                  ],
                  "validationRules":[
                     {
                        "errorMessage":"Feltet skal udfyldes",
                        "validationRule":"notEmpty"
                     },
                     {
                        "errorMessage":"Max 100 tegn",
                        "validationRule":"^[\\s\\S]{0,100}$"
                     }
                  ]
               },
               {
                  "type":"form",
                  "name":"Persontype",
                  "description":"Persontype. Der er kun én hovedperson",
                  "tableFieldName":"person_type",
                  "order":1,
                  "fieldLength":"50",
                  "caption":"Vælg persontype",
                  "normalizedData":[
                    {
                        "1":"Hovedperson"
                    },
                    {
                        "2":"Ægtefælle"
                    },
                    {
                        "3":"Barn"
                    }
                  ],
                  "validationRules":[
                     {
                        "errorMessage":"Feltet skal udfyldes",
                        "validationRule":"notEmpty"
                     }
                  ]
               }
            ],
            "relations":[
               {
                  "foreignTableName":"prb_registerblade",
                  "foreignKey":"registerblad_id",
                  "primaryKey":"id"
               }
            ]
         },
         {
            "name":"Stillinger",
            "description":"Hovedpersonens stillinger",
            "tableName":"prb_stillinger",
            "maxNumberOfIndexations":"-1",
            "fields":[
               {
                  "type":"form",
                  "name":"Stilling",
                  "description":"Hovedpersonens stilling",
                  "tableFieldName":"stilling",
                  "order":2,
                  "fieldLength":"50",
                  "caption":"Indtast stilling",
                  "normalizedData":"normalized/[collection_id]/[normalized_field_id]/query=:stilling",
                  "validationRules":[
                     {
                        "errorMessage":"Feltet skal udfyldes",
                        "validationRule":"notEmpty"
                     },
                     {
                        "errorMessage":"Max 100 tegn",
                        "validationRule":"^[\\s\\S]{0,100}$"
                     }
                  ]
               }
            ],
            "relations":[
               {
                  "foreignTableName":"prb_stillinger",
                  "foreignKey":"stilling_id",
                  "primaryKey":"id"
               }
            ]
         },
         {
            "name":"registerblade",
            "description":"Indeholder personer på registerbladet, både hovedpersoner, ægtefæller og børn",
            "tableName":"prb_registerblade_info",
            "maxNumberOfIndexations":"1",
            "fields":[
               {
                  "type":"form",
                  "name":"Udfyldelsesdato",
                  "description":"Registerbladets udfyldelsesdato. Findes i toppen",
                  "tableFieldName":"udfyldelsesdato",
                  "order":1,
                  "fieldLength":"16",
                  "caption":"Udfyldelsesdato",
                  "normalizedData":[

                  ],
                  "validationRules":[
                     {
                        "errorMessage":"Feltet skal overholde formen dd-mm-åååå",
                        "validationRule":"^(0?[1-9]|[12][0-9]|3[01])[\\/\\-](0?[1-9]|1[012])[\\/\\-]\\d{4}$"
                     }
                  ]
               },
               {
                  "type":"form",
                  "name":"Bemærkninger",
                  "description":"Øvrige bemærkninger på bladet, findes eksempelvis i margenen",
                  "tableFieldName":"notes",
                  "order":2,
                  "fieldLength":"50",
                  "normalizedData":[

                  ],
                  "validationRules":[
                     {
                        "errorMessage":"Max 100 tegn",
                        "validationRule":"^[\\s\\S]{0,100}$"
                     }
                  ]
               }
            ],
            "relations":[

            ]
         }
      ]
   }
}